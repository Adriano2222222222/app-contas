<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="theme-color" content="#007bff">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’°</text></svg>">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <link rel="stylesheet" href="Styles/estilos.css?v=5">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <title>Meu primeiro Aplicativo</title>

  <script>
    if('serviceWorker' in navigator){
      window.addEventListener('load', () =>{
        navigator.serviceWorker.register('./sw.js')
        .then((reg) => console.log('Service Worker registrado!', reg))
        .catch((err) => console.log('Erro ao registrar SW:', err));
      });
    }
  </script>
</head>

<body>
  <div class="container">
    <button id="btnTema" class="btn-tema">ğŸŒ™</button>
    <h1>Programa Contas do MÃªs</h1>

    <div id="seletor-mes">
      <label for="mes">MÃªs:</label>
      <select id="mes"></select>
      <label for="ano">Ano:</label>
      <input type="number" id="ano" min="2020" max="2030">

      <button id="btnCopiarMes" title="Copiar contas para o prÃ³ximo mÃªs">â¡ï¸ Copiar MÃªs</button>
    </div>

    <div id="campo-salario">
      <label for="salario">Meu SalÃ¡rio do MÃªs R$:</label>
      <input type="number" id="salario" step="0.01" placeholder="Ex: 3500.00">
    </div>
    
    <hr>

    <form id="formContas">
      <p>
        <label for="inDescricao">DescriÃ§Ã£o da Conta:</label>
        <input type="text" id="inDescricao" required>
      </p>
      <p>
        <label for="inData">Data da Conta:</label>
        <input type="date" id="inData" required>
      </p>

      <p>
        <label for="inCategoria">Categoria:</label>
        <select id="inCategoria" required>
          </select>
      </p>

      <p>
        <label for="inValor">Valor da Conta R$:</label>
        <input type="number" min="0" step="0.01" id="inValor" required>
      </p>
      <input type="submit" value="Registrar Conta">
    </form>

    <hr>

    <h2>Contas Registradas</h2>

    <div class="configuracao-container">
    <div class="ordenacao-container">
      <label for="ordenacao">Ordenar por:</label>
      <select id="ordenacao">
        <option value="data-asc">Data (Mais prÃ³ximo)</option>
        <option value="data-desc">Data (Mais distante)</option>
        <option value="valor-desc">Valor (Maior)</option>
        <option value="valor-asc">Valor (Menor)</option>
        <option value="desc-asc">DescriÃ§Ã£o (A-Z)</option>
      </select>
    </div>
    <button id="btnGerenciarCategorias" class="btn-gerenciar">Gerenciar Categorias</button>
    </div>

    <div class="filtros-container">
      <button id="filtro-todas" class="filtro-btn active">Mostrar Todas</button>
      <button id="filtro-pendentes" class="filtro-btn">Mostrar Pendentes</button>
      <button id="filtro-pagas" class="filtro-btn">Mostrar Pagas</button>
    </div>

    <ul id="listaContas"></ul>

    <div id="resumo-container">
      <div id="grafico-container">
        <canvas id="graficoResumo"></canvas>
      </div>
      <div id="resumoContas">
      </div>
    </div>
    
    <div class="acoes-rodape">
      <button id="btnExportar" class="btn-exportar">ğŸ“Š Baixar RelatÃ³rio (Excel)</button>
      <button id="btnLimparMes" class="btn-limpar">ğŸ—‘ï¸ Limpar Contas do MÃªs</button>
    </div>
    
    
    <div id="modal-container" class="modal-escondido">
      <div id="modal-conteudo">
        <h2>Editar Conta</h2>
        <form id="formModal">
          <input type="hidden" id="modalIndice">
          <p>
            <label for="modalDescricao">DescriÃ§Ã£o da Conta:</label>
            <input type="text" id="modalDescricao" required>
          </p>
          <p>
            <label for="modalData">Data da Conta:</label>
            <input type="date" id="modalData" required>
          </p>

          <p>
            <label for="modalCategoria">Categoria:</label>
            <select id="modalCategoria" required>
              </select>
          </p>
          <p>
            <label for="modalValor">Valor da Conta R$:</label>
            <input type="number" min="0" step="0.01" id="modalValor" required>
          </p>
          <div class="modal-botoes">
            <button type="button" id="btnModalCancelar">Cancelar</button>
            <button type="submit" id="btnModalSalvar">Salvar AlteraÃ§Ãµes</button>
          </div>
        </form>
      </div>
    </div>

    <div id="modal-categorias-container" class="modal-escondido">
      <div id="modal-categorias-conteudo">
        <h2>Gerenciar Categorias</h2>

        <form id="formAddCategoria">
          <div class="grupo-input">
            <label for="iNovaCategoria">Nome:</label>
            <input type="text" id="inNovaCategoria" placeholder="Ex: Pets" required>
          </div>

          <div class="grupo-input">
            <label for="inCorCategoria">Cor:</label>
            <input type="color" id="inCorCategoria" value="#563d7c">
          </div>
          
          <button type="submit">Adicionar</button>
        </form>

        <ul id="lista-categorias-modal">
          </ul>

        <button type="button" id="btnFecharModalCategorias">Fechar</button>
      </div>
    </div>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="Java/Aplicativo.js?v=5"></script>

</body>
</html>
