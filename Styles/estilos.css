/* --- VARIÁVEIS DE CORES (O SEGREDO DO MODO ESCURO) --- */
:root {
    --bg-body: #f0f2f5;
    --bg-container: #ffffff;
    --texto-principal: #333;
    --borda: #ccc;
    --borda-suave: #eee;
    --bg-input: #fff;
    --sombra: rgba(0, 0, 0, 0.1);
    --destaque: #007bff; /* Azul */
}

/* Quando a classe .dark-mode for adicionada ao corpo */
body.dark-mode {
    --bg-body: #18191a;
    --bg-container: #242526;
    --texto-principal: #e4e6eb;
    --borda: #3a3b3c;
    --borda-suave: #3a3b3c;
    --bg-input: #3a3b3c;
    --sombra: rgba(0, 0, 0, 0.5);
    --destaque: #4a90e2; /* Azul mais claro para fundo escuro */
}

/* --- GERAL --- */
body {
    font-family: 'Roboto', sans-serif;
    background-color: var(--bg-body); /* Usa a variável */
    color: var(--texto-principal);    /* Usa a variável */
    margin: 0;
    padding: 20px;
    transition: background-color 0.3s, color 0.3s; /* Transição suave */
}

/* --- CONTAINER PRINCIPAL --- */
.container {
    max-width: 600px;
    margin: 0 auto;
    background-color: var(--bg-container); /* Usa a variável */
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 2px 10px var(--sombra);
    position: relative; /* Para posicionar o botão de tema */
}

/* Botão de Tema no canto */
.btn-tema {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    font-size: 1.5em;
    cursor: pointer;
}

h1, h2 {
    color: var(--destaque);
    text-align: center;
    border-bottom: 2px solid var(--bg-body);
    padding-bottom: 10px;
}

/* --- FORMULÁRIOS E INPUTS --- */
form {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

form label {
    font-weight: bold;
    margin-bottom: 5px;
    display: block;
}

/* Regra unificada para todos os inputs */
form input[type="text"],
form input[type="number"],
form input[type="date"],
form select,
#formModal input[type="text"],
#formModal input[type="number"],
#formModal input[type="date"],
#formModal select,
#formAddCategoria input[type="text"] {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--borda);
    border-radius: 4px;
    box-sizing: border-box;
    background-color: var(--bg-input); /* Fundo do input muda no dark mode */
    color: var(--texto-principal);     /* Texto do input muda no dark mode */
}

form input[type="submit"] {
    background-color: var(--destaque);
    color: white;
    font-size: 16px;
    font-weight: bold;
    padding: 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s;
}

form input[type="submit"]:hover {
    opacity: 0.9;
}

/* --- BOTÃO MODO EDIÇÃO (AMARELO) --- */
form input[type="submit"].modo-edicao {
    background-color: #ffc107;
    color: #333; /* Sempre escuro para contraste */
}

/* --- SELETOR DE MÊS E SALÁRIO --- */
#seletor-mes, #campo-salario {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    padding: 15px 0;
    background-color: var(--bg-body); /* Fundo suave muda no dark mode */
    border-radius: 6px;
    margin-bottom: 20px;
}
#seletor-mes select, #seletor-mes input, #campo-salario input {
    padding: 8px;
    border: 1px solid var(--borda);
    border-radius: 4px;
    background-color: var(--bg-input);
    color: var(--texto-principal);
}

/* --- FILTROS E ORDENAÇÃO --- */
.ordenacao-container {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    margin-bottom: 15px;
    gap: 10px;
}
.ordenacao-container select {
    background-color: var(--bg-input);
    color: var(--texto-principal);
    border: 1px solid var(--borda);
    padding: 8px;
    border-radius: 4px;
}

.filtros-container {
    display: flex;
    justify-content: space-around;
    margin-bottom: 20px;
    border: 1px solid var(--borda);
    border-radius: 6px;
    overflow: hidden;
}

.filtro-btn {
    flex-grow: 1;
    padding: 12px 10px;
    background-color: var(--bg-body);
    color: var(--texto-principal);
    border: none;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    border-right: 1px solid var(--borda);
}
.filtro-btn:last-child { border-right: none; }
.filtro-btn.active {
    background-color: var(--destaque);
    color: white;
}

/* --- LISTA DE CONTAS --- */
#listaContas {
    list-style-type: none;
    padding: 0;
    margin-top: 20px;
}

#listaContas li {
    display: flex;
    align-items: center;
    padding: 15px 10px;
    border-bottom: 1px solid var(--borda-suave);
    word-break: break-all;
}

.chk-paga { margin-right: 15px; min-width: 18px; height: 18px; }

/* Estilo para a conta paga */
.conta-paga {
    text-decoration: line-through;
    color: #888; /* Mantém cinza */
    opacity: 0.6;
}

/* Botões da lista */
#listaContas li button, .btn-excluir-categoria {
    margin-left: 8px;
    padding: 6px 10px;
    border: none;
    border-radius: 4px;
    color: white;
    cursor: pointer;
}
.btn-editar { background-color: #ffc107; color: #333 !important; }
.btn-excluir { background-color: #dc3545; }
.btn-copiar { background-color: #17a2b8; }

/* Tags de Categoria */
.tag-categoria {
    font-size: 0.8em;
    font-weight: bold;
    padding: 3px 8px;
    border-radius: 10px;
    color: white;
    margin-right: 10px;
    text-transform: capitalize;
    background-color: #6c757d; /* Cor padrão */
}
/* Cores específicas das tags */
.tag-categoria[data-categoria="moradia"] { background-color: #17a2b8; }
.tag-categoria[data-categoria="alimentacao"] { background-color: #28a745; }
.tag-categoria[data-categoria="transporte"] { background-color: #ffc107; color: #333; }
.tag-categoria[data-categoria="lazer"] { background-color: #fd7e14; }
.tag-categoria[data-categoria="saude"] { background-color: #dc3545; }
.tag-categoria[data-categoria="outros"] { background-color: #6c757d; }

/* --- RESUMO E GRÁFICO --- */
#resumo-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    align-items: center;
    gap: 20px;
    margin-top: 20px;
    padding-top: 15px;
    border-top: 2px solid var(--borda-suave);
}
#grafico-container { max-height: 250px; }
#resumoContas { text-align: right; }

.mensagem-financeira {
    margin-top: 15px;
    font-size: 1.1em;
    font-weight: bold;
    text-align: center;
    padding: 10px;
    border-radius: 4px;
    background-color: var(--bg-body); /* Adapta ao tema */
    color: var(--texto-principal);
    border: 1px solid var(--borda);
}

/* --- BOTÃO LIMPAR MÊS --- */
.btn-limpar {
    background-color: #dc3545;
    color: white;
    font-size: 14px;
    font-weight: bold;
    padding: 10px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    width: 100%;
    margin-top: 15px;
}

/* --- MODAIS (GERAL) --- */
#modal-container, #modal-categorias-container {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.6); /* Um pouco mais escuro */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 1; visibility: visible;
    transition: opacity 0.2s, visibility 0.2s;
}

.modal-escondido { opacity: 0 !important; visibility: hidden !important; }

#modal-conteudo, #modal-categorias-conteudo {
    background-color: var(--bg-container); /* Fundo do modal muda */
    color: var(--texto-principal);         /* Texto do modal muda */
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    width: 90%;
    max-width: 500px;
}

.modal-botoes {
    display: flex;
    justify-content: flex-end;
    gap: 15px;
    margin-top: 25px;
}

/* Configurações e Modal de Categorias */
.configuracao-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}
.btn-gerenciar {
    padding: 8px 12px;
    background-color: #6c757d;
    color: white;
    border: none;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
}

#lista-categorias-modal {
    list-style: none;
    padding: 0;
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid var(--borda);
    border-radius: 4px;
    margin-bottom: 20px;
}
#lista-categorias-modal li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    border-bottom: 1px solid var(--borda-suave);
    color: var(--texto-principal); /* Garante texto visível */
}
#btnFecharModalCategorias {
    width: 100%; padding: 10px; background-color: #6c757d; color: white; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;
}
#formAddCategoria button {
    padding: 0 15px; background-color: var(--destaque); color: white; border: none; border-radius: 4px; font-weight: bold; cursor: pointer;
}

@media (max-width: 600px) {
    #resumo-container { grid-template-columns: 1fr; }
    #grafico-container { max-height: 200px; }
    #resumoContas { text-align: center; }
}
/*---BOTÃO COPIAR MÊS---*/
#btnCopiarMes{
    margin-left: 15px;
    padding: 8px 12px;
    background-color: var(---destaque); /*Usa a cor do tema (azul)*/
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9em;
    transition: opacity 0.2s;
}
#btnCopiarMes:hover{
    opacity: 0.8;
}
/*Ajuste para telas pequenas*/
@media (max-width: 600px){
    #seletor-mes{
        flex-wrap: wrap; /*Permite que o botão vá para a linha de baixo se faltar espaço*/
    }
}
/*---CORREÇÃO DE BUGS(Botões de Categoria)---*/
/*Força o botão de excluir categoria a ser VERMELHO com texto BRANCO*/
.btn-excluir-categoria{
    background-color: #dc3545 !important; /*Vermelho*/
    color: white !important; /*Texto Branco*/
    border: none;
    border-radius: 4px;
    padding: 5px 10px;
    font-size: 0.8em;
    cursor: pointer;
    transition: opacity 0.2s;
}
.btn-excluir-categoria:hover{
    opacity: 0.8;
}
/*Força o botão desabilitado ("Outros") a ser CINZA*/
.btn-excluir-categoria:disabled{
    background-color: #6c757d !important;
    color: white !important;
    cursor: not-allowed;
    opacity: 0.6;
}
/*Garante que o texto da lista de categorias seja legível no Modo Escuro*/
#lista-categorias-modal li{
    color: var(---texto-principal); /*Usa a variável que muda de cor (preto/branco)*/
    border-bottom: 1px solid var(--borda-suave); /*Garante que a linha divisória apareça*/
}
/*---AJUSTE PARA CELULAR---*/
@media (max-width: 600px){
    /*Ajuste o container para dar espaço ao botão de tema*/
    .container{
        padding-top: 60px; /*Mais espaço no topo*/
        position: relative;
    }

    /*Posiciona o botão de tema bem no topo direito*/
    .btn-tema{
        top: 10px;
        right: 10px;
        font-size: 1.8em; /*ícone maior para facilitar o toque*/
        z-index: 100; /*Garante que fique por cima de tudo*/
        padding: 10px; /*Aumenta a área de toque*/
    }

    /*Ajusta o título para não bater no botão*/
    h1{
        font-size: 1.5em;
        margin-top: 0;
    }

    /*Garante que os botões de filtro não fiquem espremidos*/
    .filtros-container{
        flex-wrap: wrap;
    }
    .filtro-btn{
        flex-grow: 1;
        min-width: 30%; /*Garante tamanho mínimo*/
    }
}
/*---ATUALIZAÇÃO MODAL CATEGORIAS---*/
#formAddCategoria{
    display: flex;
    align-items: flex-end; /*Alinha o botão com a base dos inputs*/
    gap: 10px;
    margin-bottom: 20px;
}
.grupo-input{
    display: flex;
    flex-direction: column;
}
.grupo-input label{
    font-size: 0.8em;
    margin-bottom: 3px;
}
#inCorCategoria{
    height: 38px; /*Altura para combinar com o input de texto*/
    width: 50px;
    padding: 0;
    border: 1px solid var(--borda);
    background: none;
    cursor: pointer;
}
/*Bolinha de cor na lista do modal*/
.cor-preview{
    display: inline-block;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: 8px;
    border: 1px solid rgba(0,0,0,0.1);
}
/*---CORREÇÃO TOASTIFY (NOTIFICAÇÕES)---*/
.toastify{
    z-index: 9999 !important; /*Garante que fique na frente de todos os modais*/
    font-family: 'Roboto', sans-serif; /*Usa a mesma fonte do app*/
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2); /*Sombra para destaque*/
}
/*---AÇÕES DO RODAPÉ (EXPORTAR E LIMPAR)---*/
.acoes-rodape{
    display: flex;
    gap: 10px;
    margin-top: 20px;
}
.acoes-rodape button{
    flex: 1; /*Faz os botões ocuparem o mesmo espaço*/
    padding: 12px;
    border: none;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
    font-size: 14px;
    transition: opacity 0.2s;
}
.acoes-rodape button:hover{
    opacity: 0.9;
}
/*Botão Exportar (Verde Excel)*/
.btn-exportar{
    background-color: #217346;
    color: white;
}
/*O botão limpar já tem estilo, mas garantimos aqui*/
.btn-limpar{
    margin-top: 0; /*Remove a margem antiga*/
}
/*Ajuste para celular: um embaixo do outro */
@media (max-width: 600px){
    .acoes-rodape{
        flex-direction: column;
    }
}
